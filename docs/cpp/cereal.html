

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Cereal &mdash; Programming Notes v0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/collapsible-lists/js/CollapsibleLists.compressed.js"></script>
        <script src="../_static/collapsible-lists/js/apply-collapsible-lists.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/collapsible-lists/css/tree_view.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="onnxruntime" href="onnxruntime.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Programming Notes
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../sphinx/index.html">Sphinx</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../sphinx/install.html">Environment Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx/useful_extensions.html">Useful Extensions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../sphinx/useful_extensions.html#sphinx-ext-extlinks">sphinx.ext.extlinks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx/useful_extensions.html#sphinx-ext-napoleon">sphinx.ext.napoleon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx/useful_extensions.html#sphinx-ext-todo">sphinx.ext.todo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx/useful_extensions.html#sphinx-ext-autodoc">sphinx.ext.autodoc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx/open-sources.html">Open Sources</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../sphinx/open-sources.html#virtualenv">virtualenv</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx/rst_basics.html">reStructuredText Basics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../sphinx/rst_basics.html#references">References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sphinx/rst_basics.html#footnotes">Footnotes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx/exhale.html">Exhale</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../sphinx/exhale.html#install-exhale">Install Exhale</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sphinx/exhale.html#configure-sphinx">Configure Sphinx</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../example_exhale_api/library_root.html">Library API</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ssh/index.html">Secure Shell (SSH)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ssh/config.html">Passwordless Login</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ssh/config.html#generate-keys">Generate keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ssh/config.html#copy-keys">Copy Keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ssh/config.html#edit-ssh-config">Edit .ssh/config</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ssh/config.html#configuration-for-git">Configuration for Git</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ssh/config.html#useful-options">Useful Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../os/index.html">Operating Systems</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../os/papers.html">Papers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pybind/index.html">pybind11</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pybind/install.html">Install pybind11</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pybind/make.html">Build with Make</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pybind/setup.html">Build with setup.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pybind/bazel.html">Build with Bazel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pybind/cmake.html">Build with CMake</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../pybind/cmake.html#install-cmake">Install CMake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pybind/cmake.html#build-example">Build Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cmake/index.html">CMake</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cmake/basics.html">Basics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">Python</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../python/venv.html">Virtual Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/style_guide.html">Python Style Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../python/style_guide.html#faqs">FAQs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../python/the_with_statement.html">The <code class="docutils literal notranslate"><span class="pre">with</span></code> Statement</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../python/the_with_statement.html#references">References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bash/index.html">Bash</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../bash/basics.html">Basics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../bash/basics.html#get-the-current-directory-of-the-script">Get the current directory of the script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bash/basics.html#date"><code class="docutils literal notranslate"><span class="pre">date</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bash/basics.html#array"><code class="docutils literal notranslate"><span class="pre">array</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../bash/basics.html#block-comment">Block Comment</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pytorch/index.html">PyTorch</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pytorch/open-source.html">Open Source Project</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../kaldi/index.html">Kaldi</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../kaldi/transition_model.html">Transition Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../kaldi/transition_model.html#basic-terminology">Basic Terminology</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../git/index.html">Git</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">C++ Programming</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cppcon.html">CppCon</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="open-source-projects.html">C++ Open Source Projects</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="gperftools.html">gperftools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="gperftools.html#pprof">pprof</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="onnxruntime.html">onnxruntime</a><ul>
<li class="toctree-l4"><a class="reference internal" href="onnxruntime.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Cereal</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hello-world-example">Hello World Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cereal-internals">Cereal Internals</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Programming Notes</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">C++ Programming</a> &raquo;</li>
        
          <li><a href="open-source-projects.html">C++ Open Source Projects</a> &raquo;</li>
        
      <li>Cereal</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/csu-fangjun/Programming-Notes/blob/master/cpp/cereal.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cereal">
<h1>Cereal<a class="headerlink" href="#cereal" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>GitHub address: <a class="reference external" href="https://github.com/USCiLab/cereal">https://github.com/USCiLab/cereal</a></p></li>
<li><p>Documentation address: <a class="reference external" href="http://uscilab.github.io/cereal/">http://uscilab.github.io/cereal/</a></p></li>
<li><p>Doxygen API address: <a class="reference external" href="https://uscilab.github.io/cereal/assets/doxygen/index.html">https://uscilab.github.io/cereal/assets/doxygen/index.html</a></p></li>
<li><p>Quick Start: <a class="reference external" href="http://uscilab.github.io/cereal/quickstart.html">http://uscilab.github.io/cereal/quickstart.html</a></p></li>
</ul>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>It is a header only library.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget https://github.com/USCiLab/cereal/archive/v1.3.0.tar.gz
tar xf v1.3.0.tar.gz
</pre></div>
</div>
<p>Now all stuff related to cereal is in the folder <code class="docutils literal notranslate"><span class="pre">cereal-1.3.0</span></code></p>
</div>
<div class="section" id="hello-world-example">
<h2>Hello World Example<a class="headerlink" href="#hello-world-example" title="Permalink to this headline">¶</a></h2>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Makefile</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-makefile notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">CXXFLAGS</span> <span class="o">=</span> -I<span class="k">$(</span>HOME<span class="k">)</span>/open-source/cereal-1.3.0/include
<span class="nv">CXXFLAGS</span> <span class="o">+=</span> -std<span class="o">=</span>c++11

<span class="nf">hello</span><span class="o">:</span> <span class="n">hello</span>.<span class="n">cc</span>
	<span class="k">$(</span>CXX<span class="k">)</span> <span class="k">$(</span>CXXFLAGS<span class="k">)</span> -o <span class="nv">$@</span> $&lt;
</pre></div>
</td></tr></table></div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">hello.cc</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;cassert&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;fstream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&quot;cereal/archives/binary.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;cereal/archives/json.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;cereal/archives/xml.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;cereal/types/string.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;cereal/types/vector.hpp&quot;</span><span class="cp"></span>

<span class="k">namespace</span> <span class="p">{</span>

<span class="k">struct</span> <span class="n">Student</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">courses</span><span class="p">;</span>

  <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">Archive</span><span class="o">&gt;</span>
  <span class="kt">void</span> <span class="n">serialize</span><span class="p">(</span><span class="n">Archive</span><span class="o">&amp;</span> <span class="n">ar</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ar</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">courses</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">Class</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Student</span><span class="o">&gt;</span> <span class="n">students</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
<span class="cp">#if 0</span><span class="c"></span>
<span class="c">  template &lt;typename Archive&gt;</span>
<span class="c">  void save(Archive&amp; ar) const {</span>
<span class="c">    ar(id, students);</span>
<span class="c">  }</span>

<span class="c">  template &lt;typename Archive&gt;</span>
<span class="c">  void load(Archive&amp; ar) {</span>
<span class="c">    ar(id);</span>
<span class="c">    ar(students);</span>
<span class="c">  }</span>
<span class="cp">#else</span>
  <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">Archive</span><span class="o">&gt;</span>
  <span class="kt">void</span> <span class="n">serialize</span><span class="p">(</span><span class="n">Archive</span><span class="o">&amp;</span> <span class="n">ar</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ar</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="n">ar</span><span class="p">(</span><span class="n">students</span><span class="p">);</span>
  <span class="p">}</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="p">}</span>  <span class="c1">// namespace</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">ofstream</span> <span class="n">os</span><span class="p">(</span><span class="s">&quot;test.bin&quot;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="p">);</span>
    <span class="n">cereal</span><span class="o">::</span><span class="n">BinaryOutputArchive</span> <span class="n">archive</span><span class="p">(</span><span class="n">os</span><span class="p">);</span>

    <span class="n">Class</span> <span class="n">c</span><span class="p">;</span>
    <span class="n">c</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">2020</span><span class="p">;</span>

    <span class="n">Student</span> <span class="n">s1</span><span class="p">;</span>
    <span class="n">s1</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">s1</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;s1&quot;</span><span class="p">;</span>
    <span class="n">s1</span><span class="p">.</span><span class="n">courses</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">};</span>

    <span class="n">Student</span> <span class="n">s2</span><span class="p">;</span>
    <span class="n">s2</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">s2</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;s2&quot;</span><span class="p">;</span>
    <span class="n">s2</span><span class="p">.</span><span class="n">courses</span> <span class="o">=</span> <span class="p">{</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">};</span>

    <span class="n">c</span><span class="p">.</span><span class="n">students</span> <span class="o">=</span> <span class="p">{</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">};</span>

    <span class="n">archive</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>

    <span class="p">{</span>
      <span class="n">cereal</span><span class="o">::</span><span class="n">JSONOutputArchive</span> <span class="n">output</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
      <span class="n">output</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="p">{</span>
      <span class="n">cereal</span><span class="o">::</span><span class="n">XMLOutputArchive</span> <span class="n">xml</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span>
      <span class="n">xml</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">ifstream</span> <span class="n">fs</span><span class="p">(</span><span class="s">&quot;test.bin&quot;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="p">);</span>
    <span class="n">cereal</span><span class="o">::</span><span class="n">BinaryInputArchive</span> <span class="n">iarchive</span><span class="p">(</span><span class="n">fs</span><span class="p">);</span>
    <span class="n">Class</span> <span class="n">c</span><span class="p">;</span>
    <span class="n">iarchive</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">students</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">2</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="output">
<h3>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">{</span>
<span class="go">    &quot;value0&quot;: {</span>
<span class="go">        &quot;value0&quot;: 2020,</span>
<span class="go">        &quot;value1&quot;: [</span>
<span class="go">            {</span>
<span class="go">                &quot;value0&quot;: 1,</span>
<span class="go">                &quot;value1&quot;: &quot;s1&quot;,</span>
<span class="go">                &quot;value2&quot;: [</span>
<span class="go">                    1,</span>
<span class="go">                    2,</span>
<span class="go">                    3</span>
<span class="go">                ]</span>
<span class="go">            },</span>
<span class="go">            {</span>
<span class="go">                &quot;value0&quot;: 2,</span>
<span class="go">                &quot;value1&quot;: &quot;s2&quot;,</span>
<span class="go">                &quot;value2&quot;: [</span>
<span class="go">                    10,</span>
<span class="go">                    20</span>
<span class="go">                ]</span>
<span class="go">            }</span>
<span class="go">        ]</span>
<span class="go">    }</span>
<span class="go">}&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="go">&lt;cereal&gt;</span>
<span class="go">  &lt;value0&gt;</span>
<span class="go">    &lt;value0&gt;2020&lt;/value0&gt;</span>
<span class="go">    &lt;value1 size=&quot;dynamic&quot;&gt;</span>
<span class="go">      &lt;value0&gt;</span>
<span class="go">        &lt;value0&gt;1&lt;/value0&gt;</span>
<span class="go">        &lt;value1&gt;s1&lt;/value1&gt;</span>
<span class="go">        &lt;value2 size=&quot;dynamic&quot;&gt;</span>
<span class="go">          &lt;value0&gt;1&lt;/value0&gt;</span>
<span class="go">          &lt;value1&gt;2&lt;/value1&gt;</span>
<span class="go">          &lt;value2&gt;3&lt;/value2&gt;</span>
<span class="go">        &lt;/value2&gt;</span>
<span class="go">      &lt;/value0&gt;</span>
<span class="go">      &lt;value1&gt;</span>
<span class="go">        &lt;value0&gt;2&lt;/value0&gt;</span>
<span class="go">        &lt;value1&gt;s2&lt;/value1&gt;</span>
<span class="go">        &lt;value2 size=&quot;dynamic&quot;&gt;</span>
<span class="go">          &lt;value0&gt;10&lt;/value0&gt;</span>
<span class="go">          &lt;value1&gt;20&lt;/value1&gt;</span>
<span class="go">        &lt;/value2&gt;</span>
<span class="go">      &lt;/value1&gt;</span>
<span class="go">    &lt;/value1&gt;</span>
<span class="go">  &lt;/value0&gt;</span>
<span class="go">&lt;/cereal&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="explanation">
<h3>Explanation<a class="headerlink" href="#explanation" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;cereal/archives/binary.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;cereal/archives/json.hpp&quot;</span><span class="cp"></span>
</pre></div>
</td></tr></table></div>
<p>imports the necessary headers. Cereal supports three formats:</p>
<blockquote>
<div><ul class="simple">
<li><p>binary</p></li>
<li><p>json</p></li>
<li><p>xml</p></li>
</ul>
</div></blockquote>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>According to <a class="reference external" href="http://uscilab.github.io/cereal/serialization_archives.html">http://uscilab.github.io/cereal/serialization_archives.html</a>,
binary data format ignores endianess.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">&quot;cereal/archives/portable_binary.hpp&quot;</span></code> to support both big and little endianess.</p>
</div>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;cereal/archives/xml.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;cereal/types/string.hpp&quot;</span><span class="cp"></span>
</pre></div>
</td></tr></table></div>
<p>imports support for standard library types.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Refer to <a class="reference external" href="https://uscilab.github.io/cereal/stl_support.html">https://uscilab.github.io/cereal/stl_support.html</a> for more STL types.</p>
</div>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">Archive</span><span class="o">&gt;</span>
  <span class="kt">void</span> <span class="n">serialize</span><span class="p">(</span><span class="n">Archive</span><span class="o">&amp;</span> <span class="n">ar</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ar</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">courses</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>defines <code class="docutils literal notranslate"><span class="pre">serialize</span></code>, which is used for both reading and writing.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p><code class="docutils literal notranslate"><span class="pre">ar(id,</span> <span class="pre">name,</span> <span class="pre">courses);</span></code> can be writen as:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ar</span><span class="p">(</span><span class="n">id</span><span class="p">);</span> <span class="n">ar</span><span class="p">(</span><span class="n">name</span><span class="p">);</span> <span class="n">ar</span><span class="p">(</span><span class="n">courses</span><span class="p">);</span>
</pre></div>
</div>
<p>Or written as:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ar</span><span class="p">(</span><span class="n">id</span><span class="p">);</span> <span class="n">ar</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">courses</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="highlight-cpp notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
<span class="cp">#if 0</span><span class="c"></span>
<span class="c">  template &lt;typename Archive&gt;</span>
<span class="c">  void save(Archive&amp; ar) const {</span>
<span class="c">    ar(id, students);</span>
<span class="c">  }</span>

<span class="c">  template &lt;typename Archive&gt;</span>
<span class="c">  void load(Archive&amp; ar) {</span>
<span class="c">    ar(id);</span>
<span class="c">    ar(students);</span>
<span class="c">  }</span>
<span class="cp">#else</span>
  <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">Archive</span><span class="o">&gt;</span>
  <span class="kt">void</span> <span class="n">serialize</span><span class="p">(</span><span class="n">Archive</span><span class="o">&amp;</span> <span class="n">ar</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ar</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="n">ar</span><span class="p">(</span><span class="n">students</span><span class="p">);</span>
  <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>shows two alternatives to add support for cereal to a customized type:</p>
<blockquote>
<div><ul class="simple">
<li><p>define <code class="docutils literal notranslate"><span class="pre">load</span></code> and <code class="docutils literal notranslate"><span class="pre">save</span></code></p></li>
<li><p><strong>or</strong> define <code class="docutils literal notranslate"><span class="pre">serialize</span></code></p></li>
</ul>
</div></blockquote>
<p>If both <code class="docutils literal notranslate"><span class="pre">load</span></code>, <code class="docutils literal notranslate"><span class="pre">save</span></code> and <code class="docutils literal notranslate"><span class="pre">serialize</span></code> are defined, it results
in a compile error.</p>
</div>
</div>
<div class="section" id="cereal-internals">
<h2>Cereal Internals<a class="headerlink" href="#cereal-internals" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="onnxruntime.html" class="btn btn-neutral float-left" title="onnxruntime" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, &lt;fangjun dot kuang at gmail dot com&gt;

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-160691436-1', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>